##############################  LINUX  #########################################
#
#  For Debian based OS the only thing you have to do is to run:
 
bash check_your_system_linux_debian.sh

#  the script will automatically check if your system is RVmod ready and will
#  ask you to install packages if needed. Particularly you will need:

gfortran
csh
setuptools
pip 
numpy
scipy
matplotlib
PyQt5
PyQt5.QtSvg
qtconsole
jupyter
dill
emcee 
corner 
celerite
batman
rxvt

# + the swift N-body library, which is actually in the deps directory
#
#  The script works for Python 2 and Python 3, but so far I suggest Python 2 
#  installation (see "Detailed instructions" below)
#  
#  if "check_your_system_linux_debian.sh" was executed with no problems, then
#  you are ready to go! Just type:
# 

python gui.py   


################################  MAC OS  ######################################
# Similar instructions as above are for MAC OS. These are tested and worked 
# straight away on a "clean" Mac OS X installation (Sierra 10.13). Just run:

bash check_your_system_MAC_OS.sh


# Before that you will need to install "homebrew" which requires sudo privileges 
# To install "homebrew", open terminal and type:

/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"



# I had problems with pip install of batman, in particular with the local
# numpy installation.With "pip" install it seems that the numpy headers are here:

/Users/trifontrifonov/Library/Python/2.7/lib/python/site-packages/numpy/core/include/numpy


# Therefore a copy of the header dir fixed the problem

cp -r /Users/trifontrifonov/Library/Python/2.7/lib/python/site-packages/numpy/core/include/numpy /usr/local/include

# If you experineced the same problem after the "cp -r..." run again:

bash check_your_system_MAC_OS.sh

# and all shoud be Ok now! (you may skip the swift instalation if you have
# installed the lib the first time.

################################################################################

 
#
#       Below are more detailed instructions in case you need more 
#       detailed instalation sequence

################################################################################
########################### Detailed instructions ##############################
################################################################################
#
#
# These instructions are for Ubuntu 16.04+ system running Python 2.7,
# but analogous these should work on other Linux and Mac OS systems. 
#
# I have tried the installation on Virtual machine with Ubuntu 16.04, 
# 18.04 and Lubuntu 18.04 running Python3 and generally works. 
#
# There is some problem with piping the Python3 print() functions,
# which I haven't resolved yet. As a result the stdout is not printed in the
# "Stdout/Stderr" GUI tab, but directly in the terminal shell from which you 
# start the gui.

# Therefore, if you reed this, for now I recommend only python2 install.
#  
# Not tried on Windows, yet! 
#
#
####################### For Anaconda users ###################################
# 
# Many of you may use Anaconda 2/3. That's fine, just make sure you have 
# these packages installed in your Anaconda:

gfortran
csh
setuptools
pip 
numpy
scipy
matplotlib
PyQt5
PyQt5.QtSvg
qtconsole
jupyter
dill
emcee 
corner 
celerite
batman
rxvt


# WARNING: Do not do:
#
conda install -c conda-forge batman 
#
# This will install another "batman" package, which is not what you want!
# (see https://anaconda.org/conda-forge/batman)

# do a 

pip install batman-package <-- this is the right one!





############################## Finally #################################

# to load the GUI  + Rvmod 

python gui.py 
 
# if you want to use RVmod on the Python shell

import RVmod as rv 

# for example see "testing_RV_mod_object_attempt.py"


Comments:

* All fortran and python codes in this version need very 
serious clean up from junk.

* All fortan code must be translated with f2py.

* The transit fitting is still not working.

* Many minor and not so minor problems should be fixed. See "focus_matrix_TBFixed.doc"

* Bugs are likely to occur! 










Some credits (more to come)

* The text_editor used in the tool is:

Megasolid Idiom - A rich text editor in PyQt
https://github.com/mfitzp/15-minute-apps/tree/master/wordprocessor

* The transit modeling is done with "batman"
 
https://www.cfa.harvard.edu/~lkreidberg/batman/quickstart.html

* GLS periodogram is taken from 

http://www.astro.physik.uni-goettingen.de/~zechmeister/gls.php




